function brassmonkeySwfObject(){swfobject=function(){function y(){if(!D){try{var d=g.getElementsByTagName("body")[0].appendChild(g.createElement("span"));d.parentNode.removeChild(d)}catch(p){return}D=true;for(var d=N.length,a=0;a<d;a++)N[a]()}}function I(d){D?d():N[N.length]=d}function J(d){if(typeof o.addEventListener!=c)o.addEventListener("load",d,false);else if(typeof g.addEventListener!=c)g.addEventListener("load",d,false);else if(typeof o.attachEvent!=c)F(o,"onload",d);else if(typeof o.onload==
"function"){var p=o.onload;o.onload=function(){p();d()}}else o.onload=d}function G(d){var p=null;if((d=l(d))&&d.nodeName=="OBJECT")typeof d.SetVariable!=c?p=d:(d=d.getElementsByTagName(v)[0])&&(p=d);return p}function K(){return!O&&z("6.0.65")&&(f.win||f.mac)&&!(f.wk&&f.wk<312)}function L(d,p,a,r){O=true;S=r||null;U={success:false,id:a};var b=l(a);if(b){b.nodeName=="OBJECT"?(M=A(b),P=null):(M=b,P=a);d.id=s;if(typeof d.width==c||!/%$/.test(d.width)&&parseInt(d.width,10)<310)d.width="310";if(typeof d.height==
c||!/%$/.test(d.height)&&parseInt(d.height,10)<137)d.height="137";g.title=g.title.slice(0,47)+" - Flash Player Installation";r=f.ie&&f.win?"ActiveX":"PlugIn";r="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+g.title;typeof p.flashvars!=c?p.flashvars+="&"+r:p.flashvars=r;if(f.ie&&f.win&&b.readyState!=4)r=g.createElement("div"),a+="SWFObjectNew",r.setAttribute("id",a),b.parentNode.insertBefore(r,b),b.style.display="none",function(){b.readyState==
4?b.parentNode.removeChild(b):setTimeout(arguments.callee,10)}();x(d,p,a)}}function Q(d){if(f.ie&&f.win&&d.readyState!=4){var p=g.createElement("div");d.parentNode.insertBefore(p,d);p.parentNode.replaceChild(A(d),p);d.style.display="none";(function(){d.readyState==4?d.parentNode.removeChild(d):setTimeout(arguments.callee,10)})()}else d.parentNode.replaceChild(A(d),d)}function A(d){var p=g.createElement("div");if(f.win&&f.ie)p.innerHTML=d.innerHTML;else if(d=d.getElementsByTagName(v)[0])if(d=d.childNodes)for(var a=
d.length,c=0;c<a;c++)!(d[c].nodeType==1&&d[c].nodeName=="PARAM")&&d[c].nodeType!=8&&p.appendChild(d[c].cloneNode(true));return p}function x(d,a,E){var b,e=l(E);if(f.wk&&f.wk<312)return b;if(e){if(typeof d.id==c)d.id=E;if(f.ie&&f.win){var i="",h;for(h in d)if(d[h]!=Object.prototype[h])h.toLowerCase()=="data"?a.movie=d[h]:h.toLowerCase()=="styleclass"?i+=' class="'+d[h]+'"':h.toLowerCase()!="classid"&&(i+=" "+h+'="'+d[h]+'"');h="";for(var q in a)a[q]!=Object.prototype[q]&&(h+='<param name="'+q+'" value="'+
a[q]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+h+"</object>";R[R.length]=d.id;b=l(d.id)}else{q=g.createElement(v);q.setAttribute("type",w);for(var n in d)d[n]!=Object.prototype[n]&&(n.toLowerCase()=="styleclass"?q.setAttribute("class",d[n]):n.toLowerCase()!="classid"&&q.setAttribute(n,d[n]));for(i in a)a[i]!=Object.prototype[i]&&i.toLowerCase()!="movie"&&(d=q,h=i,n=a[i],E=g.createElement("param"),E.setAttribute("name",h),E.setAttribute("value",n),d.appendChild(E));
e.parentNode.replaceChild(q,e);b=q}}return b}function m(d){var a=l(d);if(a&&a.nodeName=="OBJECT")f.ie&&f.win?(a.style.display="none",function(){if(a.readyState==4){var c=l(d);if(c){for(var b in c)typeof c[b]=="function"&&(c[b]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):a.parentNode.removeChild(a)}function l(d){var a=null;try{a=g.getElementById(d)}catch(c){}return a}function F(d,a,c){d.attachEvent(a,c);H[H.length]=[d,a,c]}function z(d){var a=f.pv,d=d.split(".");d[0]=
parseInt(d[0],10);d[1]=parseInt(d[1],10)||0;d[2]=parseInt(d[2],10)||0;return a[0]>d[0]||a[0]==d[0]&&a[1]>d[1]||a[0]==d[0]&&a[1]==d[1]&&a[2]>=d[2]?true:false}function a(d,a,b,e){if(!f.ie||!f.mac){var k=g.getElementsByTagName("head")[0];if(k){b=b&&typeof b=="string"?b:"screen";e&&(T=u=null);if(!u||T!=b)e=g.createElement("style"),e.setAttribute("type","text/css"),e.setAttribute("media",b),u=k.appendChild(e),f.ie&&f.win&&typeof g.styleSheets!=c&&g.styleSheets.length>0&&(u=g.styleSheets[g.styleSheets.length-
1]),T=b;f.ie&&f.win?u&&typeof u.addRule==v&&u.addRule(d,a):u&&typeof g.createTextNode!=c&&u.appendChild(g.createTextNode(d+" {"+a+"}"))}}}function b(d,c){if(V){var b=c?"visible":"hidden";D&&l(d)?l(d).style.visibility=b:a("#"+d,"visibility:"+b)}}function e(d){return/[\\\"<>\.;]/.exec(d)!=null&&typeof encodeURIComponent!=c?encodeURIComponent(d):d}var c="undefined",v="object",w="application/x-shockwave-flash",s="SWFObjectExprInst",o=window,g=document,B=navigator,W=false,N=[function(){W&&g.createElement(v);
var d=C.length;if(d>0)for(var a=0;a<d;a++){var e=C[a].id,r=C[a].callbackFn,k={success:false,id:e};if(f.pv[0]>0){var i=l(e);if(i)if(z(C[a].swfVersion)&&!(f.wk&&f.wk<312)){if(b(e,true),r)k.success=true,k.ref=G(e),r(k)}else if(C[a].expressInstall&&K()){k={};k.data=C[a].expressInstall;k.width=i.getAttribute("width")||"0";k.height=i.getAttribute("height")||"0";if(i.getAttribute("class"))k.styleclass=i.getAttribute("class");if(i.getAttribute("align"))k.align=i.getAttribute("align");for(var h={},i=i.getElementsByTagName("param"),
w=i.length,n=0;n<w;n++)i[n].getAttribute("name").toLowerCase()!="movie"&&(h[i[n].getAttribute("name")]=i[n].getAttribute("value"));L(k,h,e,r)}else Q(i),r&&r(k)}else if(b(e,true),r){if((e=G(e))&&typeof e.SetVariable!=c)k.success=true,k.ref=e;r(k)}}}],C=[],R=[],H=[],M,P,S,U,D=false,O=false,u,T,V=true,f=function(){var a=typeof g.getElementById!=c&&typeof g.getElementsByTagName!=c&&typeof g.createElement!=c,b=B.userAgent.toLowerCase(),e=B.platform.toLowerCase(),f=e?/win/.test(e):/win/.test(b),e=e?/mac/.test(e):
/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,k=!+"\u000b1",i=[0,0,0],h=null;if(typeof B.plugins!=c&&typeof B.plugins["Shockwave Flash"]==v){if((h=B.plugins["Shockwave Flash"].description)&&!(typeof B.mimeTypes!=c&&B.mimeTypes[w]&&!B.mimeTypes[w].enabledPlugin))W=true,k=false,h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),i[0]=parseInt(h.replace(/^(.*)\..*$/,"$1"),10),i[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),i[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,
"$1"),10):0}else if(typeof o.ActiveXObject!=c)try{var q=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(q&&(h=q.GetVariable("$version")))k=true,h=h.split(" ")[1].split(","),i=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]}catch(n){}return{w3:a,pv:i,wk:b,ie:k,win:f,mac:e}}();(function(){f.w3&&((typeof g.readyState!=c&&g.readyState=="complete"||typeof g.readyState==c&&(g.getElementsByTagName("body")[0]||g.body))&&y(),D||(typeof g.addEventListener!=c&&g.addEventListener("DOMContentLoaded",
y,false),f.ie&&f.win&&(g.attachEvent("onreadystatechange",function(){g.readyState=="complete"&&(g.detachEvent("onreadystatechange",arguments.callee),y())}),o==top&&function(){if(!D){try{g.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}y()}}()),f.wk&&function(){D||(/loaded|complete/.test(g.readyState)?y():setTimeout(arguments.callee,0))}(),J(y)))})();(function(){f.ie&&f.win&&window.attachEvent("onunload",function(){for(var a=H.length,b=0;b<a;b++)H[b][0].detachEvent(H[b][1],
H[b][2]);a=R.length;for(b=0;b<a;b++)m(R[b]);for(var c in f)f[c]=null;f=null;for(var e in swfobject)swfobject[e]=null;swfobject=null})})();return{registerObject:function(a,c,e,g){if(f.w3&&a&&c){var k={};k.id=a;k.swfVersion=c;k.expressInstall=e;k.callbackFn=g;C[C.length]=k;b(a,false)}else g&&g({success:false,id:a})},getObjectById:function(a){if(f.w3)return G(a)},embedSWF:function(a,e,g,w,k,i,h,q,n,o){var m={success:false,id:e};f.w3&&!(f.wk&&f.wk<312)&&a&&e&&g&&w&&k?(b(e,false),I(function(){g+="";w+=
"";var f={};if(n&&typeof n===v)for(var s in n)f[s]=n[s];f.data=a;f.width=g;f.height=w;s={};if(q&&typeof q===v)for(var l in q)s[l]=q[l];if(h&&typeof h===v)for(var u in h)typeof s.flashvars!=c?s.flashvars+="&"+u+"="+h[u]:s.flashvars=u+"="+h[u];if(z(k))l=x(f,s,e),f.id==e&&b(e,true),m.success=true,m.ref=l;else if(i&&K()){f.data=i;L(f,s,e,o);return}else b(e,true);o&&o(m)})):o&&o(m)},switchOffAutoHideShow:function(){V=false},ua:f,getFlashPlayerVersion:function(){return{major:f.pv[0],minor:f.pv[1],release:f.pv[2]}},
hasFlashPlayerVersion:z,createSWF:function(a,b,c){if(f.w3)return x(a,b,c)},showExpressInstall:function(a,b,c,e){f.w3&&K()&&L(a,b,c,e)},removeSWF:function(a){f.w3&&m(a)},createCSS:function(d,b,c,e){f.w3&&a(d,b,c,e)},addDomLoadEvent:I,addLoadEvent:J,getQueryParamValue:function(a){var b=g.location.search||g.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return e(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return e(b[c].substring(b[c].indexOf("=")+
1))}return""},expressInstallCallback:function(){if(O){var a=l(s);if(a&&M){a.parentNode.replaceChild(M,a);if(P&&(b(P,true),f.ie&&f.win))M.style.display="block";S&&S(U)}O=false}}}}()};(function(){function y(a,b){var e=[];bm["on"+a]=function(a){e.push(a)};bm["on"+a+"Internal"]=function(){if(b){bm.log("on"+a+"(");for(var c=0;c<arguments.length;c++)bm.log("    "+JSON.stringify(arguments[c]));bm.log(")")}if(a=="NavigationString")if((arguments[1]=="left"||arguments[1]=="right"||arguments[1]=="up"||arguments[1]=="down"||arguments[1]=="back"||arguments[1]=="activate")&&!F[arguments[0]].hackForOldNavEventsEnabled){for(var v=arguments[1],c=0;c<e.length;c++){arguments[1]=v+"Down";try{e[c].apply(bm,
arguments)}catch(w){console.log("UnhandledException ("+w+") in "+bmHooks[j]+" Callback")}arguments[1]=v+"Clicked";try{e[c].apply(bm,arguments)}catch(s){console.log("UnhandledException ("+s+") in "+bmHooks[j]+" Callback")}}arguments[1]=v+"Up"}else F[arguments[0]].hackForOldNavEventsEnabled=true;for(c=0;c<e.length;c++)try{e[c].apply(bm,arguments)}catch(o){console.log("UnhandledException ("+o+") in "+bmHooks[j]+" Callback")}}}function I(){function a(a){var b=document.createElement("div");b.id="brassmonkey-wrapper"+
Math.floor(Math.random()*281474943156225).toString(16);document.body.appendChild(b);b.style.zIndex=1E4;b.style.position="fixed";b.style.width="8px";b.style.height="8px";b.style.left="0px";b.style.bottom="0px";b.style.overflowX="hidden";b.style.overflowY="hidden";var c=document.createElement("div");c.id="brassmonkey-wrapper"+Math.floor(Math.random()*281474943156225).toString(16);b.appendChild(c);b=bm.options.name;a=typeof bm.options.design=="string"?bm.options.design:encodeURIComponent(K(bm.options.design,
a));a={bmDeviceName:b,wmode:"window",debug:"true",bmControllerXML:a};window.parent.passingObj!==void 0&&window.parent.passingObj.appId!==void 0&&window.parent.passingObj.portalId!==void 0?(a.bmDeviceId=window.parent.passingObj.appId,a.bmPortalId=window.parent.passingObj.portalId):a.bmDeviceId=Math.floor(Math.random()*281474943156225).toString(16);bm.deviceId=a.bmDeviceId;swfobject.embedSWF(bm.options.swfURL,c.id,"1","1","9.0.124","",a,{quality:"high",bgcolor:"#ffffff",allowscriptaccess:"always",allowfullscreen:"true"},
{id:"brassmonkey",name:"Play Brass Monkey",align:"middle",style:"float:left;z-index:-1;position:absolute;margin-top:-1px;"},function(a){a.success===false&&bm.options.error!==void 0?bm.options.error("noflash"):a.success===true&&bm.options.error!==void 0&&bm.options.success()})}if(typeof bm.options.design=="string")a([]);else if(bm.options.design.images.length==0)a([]);else if(L()==-1)for(var b=0,e=Array(bm.options.design.images.length),c=0;c<bm.options.design.images.length;c++)(function(){var m=c,
l=new Image;l.onload=function(){var c;c=document.createElement("canvas");var o=c.getContext("2d");c.width=l.width;c.height=l.height;o.drawImage(l,0,0);c=c.toDataURL().replace("data:image/png;base64,","");e[m]=c;b++;b==bm.options.design.images.length&&a(e)};l.src=bm.options.design.images[c]})()}function J(a){a/=bm.options.design.orientation=="portrait"?320:480;return a}function G(a){a/=bm.options.design.orientation=="portrait"?480:320;return a}function K(a,b){var e='<?xml version="1.0" encoding="utf-8"?>\n<BMApplicationScheme version="0.1" orientation="'+
a.orientation+'" touchEnabled="'+(a.touchEnabled?"yes":"no")+'" accelerometerEnabled="'+(a.accelerometerEnabled?"yes":"no")+'">\n';if(b.length!=0){e+="<Resources>\n";for(var c=0;c<b.length;c++)e+='<Resource id="'+(c+1)+'" type="image">\n',e+="<data><![CDATA["+b[c]+"]]\></data>\n",e+="</Resource>\n";e+="</Resources>\n"}else e+="<Resources/>\n";if(a.layout.length!=0){e+="<Layout>\n";for(c=0;c<a.layout.length;c++){var l=a.layout[c].handler;a.layout[c].type=="image"&&(l="nullHandler");e+='<DisplayObject type="'+
a.layout[c].type+'" top="'+G(a.layout[c].y)+'" left="'+J(a.layout[c].x)+'" width="'+J(a.layout[c].width)+'" height="'+G(a.layout[c].height)+'" functionHandler="'+l+'">\n';a.layout[c].type=="image"?e+='<Asset name="up" resourceRef="'+(a.layout[c].image+1)+'" />\n':(e+='<Asset name="up" resourceRef="'+(a.layout[c].imageUp+1)+'" />\n',e+='<Asset name="down" resourceRef="'+(a.layout[c].imageDown+1)+'" />\n');e+="</DisplayObject>\n"}e+="</Layout>\n"}else e+="<Layout/>\n";e+="</BMApplicationScheme>";return e}
function L(){var a=-1;navigator.appName=="Microsoft Internet Explorer"&&/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)!=null&&(a=parseFloat(RegExp.$1));return a}bm={version:"0.3.0",visible:true};window.swfobject===void 0&&brassmonkeySwfObject();bm.init=function(a){bm.options=a;bm.options.logging=a.logging?a.logging:false;bm.options.swfURL=a.swfURL?a.swfURL:"http://s3.amazonaws.com/files.playbrassmonkey.com/sdks/js/v"+bm.version.replace(/\./g,"-")+"/brassmonkey.swf";bm.options.design.images=
a.design.images?a.design.images:[];bm.options.design.layout=a.design.layout?a.design.layout:[]};for(var Q="#ff6600,#ffcc00,#ff3399,#ff0066,#cc00ff,#999900,#9999cc,#00cc99,#287200,#00ccff,#003366,#99ff00,#cc0000,#80cd68,#6600ff".split(","),A="DeviceAvailable,DeviceConnected,DeviceDisconnected,NavigationString,KeyString,Invocation,ShakeReceived,AccelReceived,Log,ShowSlot".split(","),x=0;x<A.length;x++)y(A[x],A[x]!="AccelReceived"&&A[x]!="Log");bm.log=function(a){if(bm.options.logging)bm.onLogInternal(a)};
bm.showSlotInternal=function(a){bm.onShowSlotInternal(Q[(Math.max(1,a)-1)%Q.length])};var m=[];bm.getControllerSlot=function(a){for(var b=0;b<m.length;b++)if(m[b]==a)return b};bm.getControllerCount=function(){for(var a=0,b=0;b<m.length;b++)m[b]!==void 0&&a++;return a};bm.getControllers=function(){for(var a=[],b=0;b<m.length;b++)m[b]!==void 0&&a.push(m[b]);return a};var l={};bm.getDeviceName=function(a){return l[a]};var F={};bm.onDeviceConnected(function(a){l[a.deviceId]=a.deviceName;F[a.deviceId]=
{hackForOldNavEventsEnabled:false};for(var b=0;b<m.length;b++)if(m[b]===void 0){m[b]=a.deviceId;return}m.push(a.deviceId)});bm.onDeviceDisconnected(function(a){delete l[a.deviceId];delete F[a.deviceId];for(var b=0;b<m.length;b++)if(m[b]==a.deviceId){m[b]=void 0;break}bm.getControllerCount()});bm.isDeviceConnected=function(a){return l[a.deviceId]==void 0?false:true};var z=[];bm.onTouchesReceived=function(a){z.push(a)};bm.onTouchesReceivedInternal=function(a){for(var b=0;b<a.touches.length;b++)for(var e=
a.touches[b],c=0;c<z.length;c++)z[c](e,a.deviceId)};bm.onSocketReady=function(){};bm.setNavMode=function(a){document.getElementById("brassmonkey")&&document.getElementById("brassmonkey").SetNavMode!==void 0&&document.getElementById("brassmonkey").SetNavMode(typeof a==="undefined"?"":a)};bm.setKeyboardMode=function(a,b){if(document.getElementById("brassmonkey")&&document.getElementById("brassmonkey").SetKeyboardMode!==void 0){var e;document.getElementById("brassmonkey").SetKeyboardMode(typeof a===
"undefined"?"":a,typeof b==="undefined"?"":b)}};bm.setGamepadMode=function(a){document.getElementById("brassmonkey")&&document.getElementById("brassmonkey").SetGamepadMode!==void 0&&document.getElementById("brassmonkey").SetGamepadMode(typeof a==="undefined"?"":a)};bm.setVisibility=function(a){if(document.getElementById("brassmonkey")&&document.getElementById("brassmonkey").SetVisibility!==void 0&&bm.visible!=a)document.getElementById("brassmonkey").SetVisibility(a,true),bm.visible=a};bm.getVisibility=
function(){return bm.visible};bm.enableAccelerometer=function(a,b,e){setTimeout(function(){document.getElementById("brassmonkey").EnableAccelerometer(a,b,e)},2E3)};bm.enableTouch=function(a,b,e){setTimeout(function(){document.getElementById("brassmonkey").EnableTouch(a,b,e)},2E3)};bm.getWidth=function(){return window.parent.passingObj!==void 0&&window.parent.passingObj.width!==void 0?window.parent.passingObj.width:-1};bm.getHeight=function(){return window.parent.passingObj!==void 0&&window.parent.passingObj.height!==
void 0?window.parent.passingObj.height:-1};bm.getFullscreen=function(){return window.parent.passingObj!==void 0&&window.parent.passingObj.fullScreen!==void 0?window.parent.passingObj.fullScreen:false};window.addEventListener?window.addEventListener("DOMContentLoaded",I,false):window.attachEvent("onload",I)})();
