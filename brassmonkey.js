function brassmonkeySwfObject(){swfobject=function(){function p(){if(!A){try{var b=h.getElementsByTagName("body")[0].appendChild(h.createElement("span"));b.parentNode.removeChild(b)}catch(d){return}A=true;for(var b=J.length,i=0;i<b;i++)J[i]()}}function E(b){A?b():J[J.length]=b}function F(b){if(typeof q.addEventListener!=n)q.addEventListener("load",b,false);else if(typeof h.addEventListener!=n)h.addEventListener("load",b,false);else if(typeof q.attachEvent!=n)f(q,"onload",b);else if(typeof q.onload==
"function"){var d=q.onload;q.onload=function(){d();b()}}else q.onload=b}function K(){var b=h.getElementsByTagName("body")[0],d=h.createElement(u);d.setAttribute("type",L);var i=b.appendChild(d);if(i){var a=0;(function(){if(typeof i.GetVariable!=n){var k=i.GetVariable("$version");if(k)k=k.split(" ")[1].split(","),g.pv=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}else if(a<10){a++;setTimeout(arguments.callee,10);return}b.removeChild(d);i=null;G()})()}else G()}function G(){var b=s.length;
if(b>0)for(var d=0;d<b;d++){var i=s[d].id,B=s[d].callbackFn,k={success:false,id:i};if(g.pv[0]>0){var c=a(i);if(c)if(e(s[d].swfVersion)&&!(g.wk&&g.wk<312)){if(l(i,true),B)k.success=true,k.ref=H(i),B(k)}else if(s[d].expressInstall&&x()){k={};k.data=s[d].expressInstall;k.width=c.getAttribute("width")||"0";k.height=c.getAttribute("height")||"0";if(c.getAttribute("class"))k.styleclass=c.getAttribute("class");if(c.getAttribute("align"))k.align=c.getAttribute("align");for(var f={},c=c.getElementsByTagName("param"),
h=c.length,o=0;o<h;o++)c[o].getAttribute("name").toLowerCase()!="movie"&&(f[c[o].getAttribute("name")]=c[o].getAttribute("value"));v(k,f,i,B)}else M(c),B&&B(k)}else if(l(i,true),B){if((i=H(i))&&typeof i.SetVariable!=n)k.success=true,k.ref=i;B(k)}}}function H(b){var d=null;if((b=a(b))&&b.nodeName=="OBJECT")typeof b.SetVariable!=n?d=b:(b=b.getElementsByTagName(u)[0])&&(d=b);return d}function x(){return!N&&e("6.0.65")&&(g.win||g.mac)&&!(g.wk&&g.wk<312)}function v(b,d,i,c){N=true;Q=c||null;S={success:false,
id:i};var k=a(i);if(k){k.nodeName=="OBJECT"?(I=m(k),O=null):(I=k,O=i);b.id=T;if(typeof b.width==n||!/%$/.test(b.width)&&parseInt(b.width,10)<310)b.width="310";if(typeof b.height==n||!/%$/.test(b.height)&&parseInt(b.height,10)<137)b.height="137";h.title=h.title.slice(0,47)+" - Flash Player Installation";c=g.ie&&g.win?"ActiveX":"PlugIn";c="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+c+"&MMdoctitle="+h.title;typeof d.flashvars!=n?d.flashvars+="&"+c:d.flashvars=
c;if(g.ie&&g.win&&k.readyState!=4)c=h.createElement("div"),i+="SWFObjectNew",c.setAttribute("id",i),k.parentNode.insertBefore(c,k),k.style.display="none",function(){k.readyState==4?k.parentNode.removeChild(k):setTimeout(arguments.callee,10)}();y(b,d,i)}}function M(b){if(g.ie&&g.win&&b.readyState!=4){var d=h.createElement("div");b.parentNode.insertBefore(d,b);d.parentNode.replaceChild(m(b),d);b.style.display="none";(function(){b.readyState==4?b.parentNode.removeChild(b):setTimeout(arguments.callee,
10)})()}else b.parentNode.replaceChild(m(b),b)}function m(b){var d=h.createElement("div");if(g.win&&g.ie)d.innerHTML=b.innerHTML;else if(b=b.getElementsByTagName(u)[0])if(b=b.childNodes)for(var a=b.length,c=0;c<a;c++)!(b[c].nodeType==1&&b[c].nodeName=="PARAM")&&b[c].nodeType!=8&&d.appendChild(b[c].cloneNode(true));return d}function y(b,d,i){var c,k=a(i);if(g.wk&&g.wk<312)return c;if(k){if(typeof b.id==n)b.id=i;if(g.ie&&g.win){var f="",e;for(e in b)if(b[e]!=Object.prototype[e])e.toLowerCase()=="data"?
d.movie=b[e]:e.toLowerCase()=="styleclass"?f+=' class="'+b[e]+'"':e.toLowerCase()!="classid"&&(f+=" "+e+'="'+b[e]+'"');e="";for(var l in d)d[l]!=Object.prototype[l]&&(e+='<param name="'+l+'" value="'+d[l]+'" />');k.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+e+"</object>";P[P.length]=b.id;c=a(b.id)}else{l=h.createElement(u);l.setAttribute("type",L);for(var o in b)b[o]!=Object.prototype[o]&&(o.toLowerCase()=="styleclass"?l.setAttribute("class",b[o]):o.toLowerCase()!=
"classid"&&l.setAttribute(o,b[o]));for(f in d)d[f]!=Object.prototype[f]&&f.toLowerCase()!="movie"&&(b=l,e=f,o=d[f],i=h.createElement("param"),i.setAttribute("name",e),i.setAttribute("value",o),b.appendChild(i));k.parentNode.replaceChild(l,k);c=l}}return c}function C(b){var d=a(b);if(d&&d.nodeName=="OBJECT")g.ie&&g.win?(d.style.display="none",function(){if(d.readyState==4){var i=a(b);if(i){for(var c in i)typeof i[c]=="function"&&(i[c]=null);i.parentNode.removeChild(i)}}else setTimeout(arguments.callee,
10)}()):d.parentNode.removeChild(d)}function a(b){var d=null;try{d=h.getElementById(b)}catch(a){}return d}function f(b,d,a){b.attachEvent(d,a);D[D.length]=[b,d,a]}function e(b){var d=g.pv,b=b.split(".");b[0]=parseInt(b[0],10);b[1]=parseInt(b[1],10)||0;b[2]=parseInt(b[2],10)||0;return d[0]>b[0]||d[0]==b[0]&&d[1]>b[1]||d[0]==b[0]&&d[1]==b[1]&&d[2]>=b[2]?true:false}function c(b,d,a,c){if(!g.ie||!g.mac){var f=h.getElementsByTagName("head")[0];if(f){a=a&&typeof a=="string"?a:"screen";c&&(R=r=null);if(!r||
R!=a)c=h.createElement("style"),c.setAttribute("type","text/css"),c.setAttribute("media",a),r=f.appendChild(c),g.ie&&g.win&&typeof h.styleSheets!=n&&h.styleSheets.length>0&&(r=h.styleSheets[h.styleSheets.length-1]),R=a;g.ie&&g.win?r&&typeof r.addRule==u&&r.addRule(b,d):r&&typeof h.createTextNode!=n&&r.appendChild(h.createTextNode(b+" {"+d+"}"))}}}function l(b,d){if(U){var i=d?"visible":"hidden";A&&a(b)?a(b).style.visibility=i:c("#"+b,"visibility:"+i)}}function z(b){return/[\\\"<>\.;]/.exec(b)!=null&&
typeof encodeURIComponent!=n?encodeURIComponent(b):b}var n="undefined",u="object",L="application/x-shockwave-flash",T="SWFObjectExprInst",q=window,h=document,t=navigator,V=false,J=[function(){V?K():G()}],s=[],P=[],D=[],I,O,Q,S,A=false,N=false,r,R,U=true,g=function(){var b=typeof h.getElementById!=n&&typeof h.getElementsByTagName!=n&&typeof h.createElement!=n,d=t.userAgent.toLowerCase(),a=t.platform.toLowerCase(),c=a?/win/.test(a):/win/.test(d),a=a?/mac/.test(a):/mac/.test(d),d=/webkit/.test(d)?parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,
"$1")):false,f=!+"\u000b1",g=[0,0,0],e=null;if(typeof t.plugins!=n&&typeof t.plugins["Shockwave Flash"]==u){if((e=t.plugins["Shockwave Flash"].description)&&!(typeof t.mimeTypes!=n&&t.mimeTypes[L]&&!t.mimeTypes[L].enabledPlugin))V=true,f=false,e=e.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),g[0]=parseInt(e.replace(/^(.*)\..*$/,"$1"),10),g[1]=parseInt(e.replace(/^.*\.(.*)\s.*$/,"$1"),10),g[2]=/[a-zA-Z]/.test(e)?parseInt(e.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof q.ActiveXObject!=n)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
if(l&&(e=l.GetVariable("$version")))f=true,e=e.split(" ")[1].split(","),g=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}catch(o){}return{w3:b,pv:g,wk:d,ie:f,win:c,mac:a}}();(function(){g.w3&&((typeof h.readyState!=n&&h.readyState=="complete"||typeof h.readyState==n&&(h.getElementsByTagName("body")[0]||h.body))&&p(),A||(typeof h.addEventListener!=n&&h.addEventListener("DOMContentLoaded",p,false),g.ie&&g.win&&(h.attachEvent("onreadystatechange",function(){h.readyState=="complete"&&(h.detachEvent("onreadystatechange",
arguments.callee),p())}),q==top&&function(){if(!A){try{h.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}p()}}()),g.wk&&function(){A||(/loaded|complete/.test(h.readyState)?p():setTimeout(arguments.callee,0))}(),F(p)))})();(function(){g.ie&&g.win&&window.attachEvent("onunload",function(){for(var b=D.length,d=0;d<b;d++)D[d][0].detachEvent(D[d][1],D[d][2]);b=P.length;for(d=0;d<b;d++)C(P[d]);for(var a in g)g[a]=null;g=null;for(var c in swfobject)swfobject[c]=null;swfobject=
null})})();return{registerObject:function(b,d,a,c){if(g.w3&&b&&d){var e={};e.id=b;e.swfVersion=d;e.expressInstall=a;e.callbackFn=c;s[s.length]=e;l(b,false)}else c&&c({success:false,id:b})},getObjectById:function(b){if(g.w3)return H(b)},embedSWF:function(b,a,c,f,h,m,z,q,o,r){var p={success:false,id:a};g.w3&&!(g.wk&&g.wk<312)&&b&&a&&c&&f&&h?(l(a,false),E(function(){c+="";f+="";var g={};if(o&&typeof o===u)for(var w in o)g[w]=o[w];g.data=b;g.width=c;g.height=f;w={};if(q&&typeof q===u)for(var s in q)w[s]=
q[s];if(z&&typeof z===u)for(var t in z)typeof w.flashvars!=n?w.flashvars+="&"+t+"="+z[t]:w.flashvars=t+"="+z[t];if(e(h))s=y(g,w,a),g.id==a&&l(a,true),p.success=true,p.ref=s;else if(m&&x()){g.data=m;v(g,w,a,r);return}else l(a,true);r&&r(p)})):r&&r(p)},switchOffAutoHideShow:function(){U=false},ua:g,getFlashPlayerVersion:function(){return{major:g.pv[0],minor:g.pv[1],release:g.pv[2]}},hasFlashPlayerVersion:e,createSWF:function(b,a,c){if(g.w3)return y(b,a,c)},showExpressInstall:function(b,a,c,e){g.w3&&
x()&&v(b,a,c,e)},removeSWF:function(b){g.w3&&C(b)},createCSS:function(b,a,e,f){g.w3&&c(b,a,e,f)},addDomLoadEvent:E,addLoadEvent:F,getQueryParamValue:function(b){var a=h.location.search||h.location.hash;if(a){/\?/.test(a)&&(a=a.split("?")[1]);if(b==null)return z(a);for(var a=a.split("&"),c=0;c<a.length;c++)if(a[c].substring(0,a[c].indexOf("="))==b)return z(a[c].substring(a[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(N){var b=a(T);if(b&&I){b.parentNode.replaceChild(I,b);if(O&&
(l(O,true),g.ie&&g.win))I.style.display="block";Q&&Q(S)}N=false}}}}()};(function(){function p(a,f){var e=[];bm["on"+a]=function(a){e.push(a)};bm["on"+a+"Internal"]=function(){if(f){bm.log("on"+a+"(");for(var c=0;c<arguments.length;c++)bm.log("    "+JSON.stringify(arguments[c]));bm.log(")")}if(a=="NavigationString")if((arguments[1]=="left"||arguments[1]=="right"||arguments[1]=="up"||arguments[1]=="down"||arguments[1]=="back"||arguments[1]=="activate")&&!M){for(var l=arguments[1],c=0;c<e.length;c++){arguments[1]=l+"Down";try{e[c].apply(bm,arguments)}catch(m){console.log("UnhandledException ("+
m+") in "+bmHooks[j]+" Callback")}arguments[1]=l+"Clicked";try{e[c].apply(bm,arguments)}catch(n){console.log("UnhandledException ("+n+") in "+bmHooks[j]+" Callback")}}arguments[1]=l+"Up"}else M=true;for(c=0;c<e.length;c++)try{e[c].apply(bm,arguments)}catch(p){console.log("UnhandledException ("+p+") in "+bmHooks[j]+" Callback")}}}function E(){function a(a){var c=document.createElement("div");c.id="brassmonkey-swf-wrapper";document.body.appendChild(c);c=bm.options.name;a=typeof bm.options.design=="string"?
bm.options.design:encodeURIComponent(G(bm.options.design,a));a={bmDeviceName:c,wmode:"transparent",debug:"true",bmControllerXML:a};window.parent.passingObj!==void 0&&window.parent.passingObj.appId!==void 0&&window.parent.passingObj.portalId!==void 0?(a.bmDeviceId=window.parent.passingObj.appId,a.bmPortalId=window.parent.passingObj.portalId):a.bmDeviceId=Math.floor(Math.random()*281474943156225).toString(16);bm.deviceId=a.bmDeviceId;swfobject.embedSWF(bm.options.swfURL,"brassmonkey-swf-wrapper","1",
"1","9.0.124","",a,{quality:"high",bgcolor:"#ffffff",allowscriptaccess:"always",allowfullscreen:"true"},{id:"brassmonkey",name:"Play Brass Monkey",align:"middle",style:"float:left;z-index:-1;position:absolute;margin-top:-1px;"},function(a){a.success===false&&(play.detectiOS()||$(".flash-required").fadeIn())})}if(typeof bm.options.design=="string")a([]);else if(bm.options.design.images.length==0)a([]);else for(var f=0,e=Array(bm.options.design.images.length),c=0;c<bm.options.design.images.length;c++)(function(){var l=
c,m=new Image;m.onload=function(){var c;c=document.createElement("canvas");var p=c.getContext("2d");c.width=m.width;c.height=m.height;p.drawImage(m,0,0);c=c.toDataURL().replace("data:image/png;base64,","");e[l]=c;f++;f==bm.options.design.images.length&&a(e)};m.src=bm.options.design.images[c]})()}function F(a){a/=bm.options.design.orientation=="portrait"?320:480;return a}function K(a){a/=bm.options.design.orientation=="portrait"?480:320;return a}function G(a,f){var e='<?xml version="1.0" encoding="utf-8"?>\n<BMApplicationScheme version="0.1" orientation="'+
a.orientation+'" touchEnabled="'+(a.touchEnabled?"yes":"no")+'" accelerometerEnabled="'+(a.accelerometerEnabled?"yes":"no")+'">\n';if(f.length!=0){e+="<Resources>\n";for(var c=0;c<f.length;c++)e+='<Resource id="'+(c+1)+'" type="image">\n',e+="<data><![CDATA["+f[c]+"]]\></data>\n",e+="</Resource>\n";e+="</Resources>\n"}else e+="<Resources/>\n";if(a.layout.length!=0){e+="<Layout>\n";for(c=0;c<a.layout.length;c++){var l=a.layout[c].handler;a.layout[c].type=="image"&&(l="nullHandler");e+='<DisplayObject type="'+
a.layout[c].type+'" top="'+K(a.layout[c].y)+'" left="'+F(a.layout[c].x)+'" width="'+F(a.layout[c].width)+'" height="'+K(a.layout[c].height)+'" functionHandler="'+l+'">\n';a.layout[c].type=="image"?e+='<Asset name="up" resourceRef="'+(a.layout[c].image+1)+'" />\n':(e+='<Asset name="up" resourceRef="'+(a.layout[c].imageUp+1)+'" />\n',e+='<Asset name="down" resourceRef="'+(a.layout[c].imageDown+1)+'" />\n');e+="</DisplayObject>\n"}e+="</Layout>\n"}else e+="<Layout/>\n";e+="</BMApplicationScheme>";return e}
bm={version:"0.1.0"};window.swfobject===void 0&&brassmonkeySwfObject();bm.init=function(a){bm.options=a;bm.options.logging=a.logging?a.logging:false;bm.options.swfURL=a.swfURL?a.swfURL:"https://s3.amazonaws.com/files.playbrassmonkey.com/sdks/js/v"+bm.version.replace(/\./g,"-")+"/brassmonkey.swf"};for(var H="#ff6600,#ffcc00,#ff3399,#ff0066,#cc00ff,#999900,#9999cc,#00cc99,#287200,#00ccff,#003366,#99ff00,#cc0000,#80cd68,#6600ff".split(","),x="DeviceAvailable,DeviceConnected,DeviceDisconnected,NavigationString,KeyString,Invocation,ShakeReceived,AccelReceived,Log,ShowSlot".split(","),
v=0;v<x.length;v++)p(x[v],x[v]!="AccelReceived"&&x[v]!="Log");bm.log=function(a){if(bm.options.logging)bm.onLogInternal(a)};var M=false;bm.showSlotInternal=function(a){bm.onShowSlotInternal(H[a-1])};var m=[];bm.getControllerSlot=function(a){for(var f=0;f<m.length;f++)if(m[f]==a)return f};bm.getControllerCount=function(){for(var a=0,f=0;f<m.length;f++)m[f]!==void 0&&a++;return a};bm.getControllers=function(){for(var a=[],f=0;f<m.length;f++)m[f]!==void 0&&a.push(m[f]);return a};var y={};bm.getDeviceName=
function(a){return y[a]};bm.onDeviceConnected(function(a){y[a.deviceId]=a.deviceName;for(var f=0;f<m.length;f++)if(m[f]===void 0){m[f]=a.deviceId;return}m.push(a.deviceId)});bm.onDeviceDisconnected(function(a){delete y[a.deviceId];for(var f=0;f<m.length;f++)if(m[f]==a.deviceId){m[f]=void 0;break}bm.getControllerCount()});bm.isDeviceConnected=function(a){return y[a.deviceId]==void 0?false:true};var C=[];bm.onTouchesReceived=function(a){C.push(a)};bm.onTouchesReceivedInternal=function(a){for(var f=
0;f<a.touches.length;f++)for(var e=a.touches[f],c=0;c<C.length;c++)C[c](e,a.deviceId)};bm.onSocketReady=function(){};bm.setNavMode=function(){document.getElementById("brassmonkey")&&document.getElementById("brassmonkey").SetNavMode!==void 0&&document.getElementById("brassmonkey").SetNavMode()};bm.setKeyboardMode=function(){document.getElementById("brassmonkey")&&document.getElementById("brassmonkey").SetKeyboardMode!==void 0&&document.getElementById("brassmonkey").SetKeyboardMode()};bm.setGamepadMode=
function(){document.getElementById("brassmonkey")&&document.getElementById("brassmonkey").SetGamepadMode!==void 0&&document.getElementById("brassmonkey").SetGamepadMode()};bm.setVisibility=function(a){document.getElementById("brassmonkey")&&document.getElementById("brassmonkey").SetVisibility!==void 0&&document.getElementById("brassmonkey").SetVisibility(a,true)};bm.enableAccelerometer=function(a,f,e){setTimeout(function(){document.getElementById("brassmonkey").EnableAccelerometer(a,f,e)},2E3)};bm.enableTouch=
function(a,f,e){setTimeout(function(){document.getElementById("brassmonkey").EnableTouch(a,f,e)},2E3)};bm.getWidth=function(){return window.parent.passingObj!==void 0&&window.parent.passingObj.width!==void 0?window.parent.passingObj.width:-1};bm.getHeight=function(){return window.parent.passingObj!==void 0&&window.parent.passingObj.height!==void 0?window.parent.passingObj.height:-1};bm.getFullscreen=function(){return window.parent.passingObj!==void 0&&window.parent.passingObj.fullScreen!==void 0?
window.parent.passingObj.fullScreen:false};window.addEventListener?window.addEventListener("DOMContentLoaded",E,false):window.attachEvent("onload",E)})();
